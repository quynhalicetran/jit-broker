<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Okta → AWS JIT Broker (Demo)</title>
  <link rel="stylesheet" href="/jit-broker/index-broker.css" />
</head>
<body>
  <div class="wrap">
    <header class="card">
      <div class="title">
        <h1>Okta → AWS JIT Broker</h1>
        <p class="sub">Just-in-time AWS access, minted from Okta groups. No standing admin.</p>
      </div>

      <div class="actions">
        <button id="btnLogin" class="btn primary">Sign in with Okta</button>
        <button id="btnLogout" class="btn" disabled>Sign out</button>
      </div>
    </header>

    <section class="grid">
      <div class="card">
        <h2>Session</h2>
        <div class="kv">
          <div class="k">Status</div>
          <div class="v" id="status">Signed out</div>

          <div class="k">User</div>
          <div class="v" id="user">—</div>

          <div class="k">Groups</div>
          <div class="v">
            <div id="groups" class="chips"></div>
          </div>
        </div>

        <details class="small">
          <summary>Token details (debug)</summary>
          <pre id="tokenDebug" class="code"></pre>
        </details>
      </div>

      <div class="card">
        <h2>Request AWS Access</h2>

        <label class="label">Requested group</label>
        <select id="requestedGroup" class="input">
          <option value="JIT-AWS-Prod-ReadOnly">JIT-AWS-Prod-ReadOnly</option>
          <option value="JIT-AWS-Prod-Admin">JIT-AWS-Prod-Admin</option>
        </select>

        <label class="label">Reason (required)</label>
        <input id="reason" class="input" placeholder="e.g. investigate 5xx errors in prod" maxlength="256" />
        <label class="label">Document / Ticket (required for Admin)</label>
        <input id="docId" class="input" placeholder="e.g. CHG123456" maxlength="32" />


        <button id="btnRequest" class="btn primary" disabled>Request JIT Session</button>

        <div class="divider"></div>

        <h3>Response</h3>
        <pre id="response" class="code muted">Sign in, then request access…</pre>

        <div class="row">
          <button id="btnCopyExports" class="btn" disabled>Copy AWS exports</button>
          <button id="btnClear" class="btn">Clear</button>
        </div>
      </div>
      <div class="card">
  <h2>Demo Mode without Okta</h2>
  <p class="sub small">Simulate policy decisions without logging in.</p>

  <label class="label">Department</label>
  <select id="demoDept" class="input">
    <option value="SRE">SRE</option>
    <option value="Finance">Finance</option>
    <option value="Intern">Intern</option>
    <option value="Unknown">Unknown</option>
  </select>

  <label class="label">User scope</label>
  <select id="demoScope" class="input">
    <option value="regular">Regular</option>
    <option value="admin">Admin</option>
    <option value="global">Global</option>
  </select>

  <label class="label">Requested AWS role</label>
  <select id="demoRequestedGroup" class="input">
    <option value="JIT-AWS-Prod-ReadOnly">JIT-AWS-Prod-ReadOnly</option>
    <option value="JIT-AWS-Prod-Admin">JIT-AWS-Prod-Admin</option>
  </select>

  <label class="label">Change request (CHG/INC)</label>
  <input id="demoDocId" class="input" placeholder="e.g. CHG123456" maxlength="32" />

  <label class="label">CHG Approval status</label>
  <select id="demoApproval" class="input">
    <option value="approved">Approved</option>
    <option value="not_approved">Not approved</option>
  </select>

  <div class="divider"></div>

  <label class="label">Requested material type</label>
  <select id="demoMaterial" class="input">
    <option value="non_confidential">Non-confidential (always allowed)</option>
    <option value="confidential">Confidential (requires Global or Admin+)</option>
  </select>

  <button id="btnDemoEvaluate" class="btn primary">Evaluate Access</button>

  <div class="divider"></div>

  <h3>Demo Result</h3>
  <pre id="demoResult" class="code muted">Pick inputs, then click Evaluate…</pre>
</div>
    </section>
    
  </div>

  


  <script type="module" src="index-broker.js"></script>

</body>
</html>
